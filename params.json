{"name":"2048","tagline":"A small clone of 1024 (https://play.google.com/store/apps/details?id=com.veewo.a1024)","body":"<!DOCTYPE html PUBLIC \"-//W3C//DTD XHTML 1.0 Transitional//EN\" \"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd\">\r\n<html xmlns=\"http://www.w3.org/1999/xhtml\" xml:lang=\"en\">\r\n<head>\r\n\t<meta http-equiv=\"Content-Type\" content=\"text/html;charset=gb2312\">\r\n\t<style>\r\n\t\tbody{margin:0;padding:0;overflow: hidden;}\r\n\t\t.city{width:100%;position:fixed;bottom: 0px;z-index: 100;}\r\n\t\t.city img{width: 100%;}\r\n\t</style>\r\n\t<title>html5Ò¹¾°·ÅÑÌ»¨ÕÀ·Å¶¯»­Ð§¹û - Õ¾³¤ËØ²Ä</title>\r\n</head>\r\n<body onselectstart = \"return false\">\r\n\r\n<div style=\"height:700px;overflow:hidden;\">\r\n\r\n\t<canvas id='cas' style=\"background-color:rgba(0,5,24,1);\">ä¯ÀÀÆ÷²»Ö§³Öcanvas</canvas>\r\n\t<div class=\"city\"><img src=\"img/city.png\" alt=\"\" /></div>\r\n\t<img src=\"img/moon.png\" alt=\"\" id=\"moon\" style=\"visibility: hidden;\"/>\r\n\t<div style=\"display:none\">\r\n\t\t<div class=\"shape\">ÐÂÄê¿ìÀÖ</div>\r\n\t\t<div class=\"shape\">ºÏ¼ÒÐÒ¸£</div>\r\n        <div class=\"shape\">ÍòÊÂÈçÒâ</div>\r\n        <div class=\"shape\">ÐÄÏëÊÂ³É</div>\r\n        <div class=\"shape\">²ÆÔ´¹ã½ø</div>\r\n\t</div>\r\n\t\r\n</div>\r\n\t\r\n\t<script>\r\n\t\tvar canvas = document.getElementById(\"cas\");\r\n\t\tvar ocas = document.createElement(\"canvas\");\r\n\t\tvar octx = ocas.getContext(\"2d\");\r\n\t\tvar ctx = canvas.getContext(\"2d\");\r\n\t\tocas.width = canvas.width = window.innerWidth;\r\n\t\tocas.height = canvas.height = 700;\r\n\t\tvar bigbooms = [];\r\n\t\r\n\t\twindow.onload = function(){\r\n\t\t\tinitAnimate()\r\n\t\t}\r\n\r\n\t\tfunction initAnimate(){\r\n\t\t\tdrawBg();\r\n\r\n\t\t\tlastTime = new Date();\r\n\t\t\tanimate();\r\n\t\t}\r\n\r\n\t\tvar lastTime;\r\n\t\tfunction animate(){\r\n\t\t\tctx.save();\r\n\t\t\tctx.fillStyle = \"rgba(0,5,24,0.1)\";\r\n\t\t\tctx.fillRect(0,0,canvas.width,canvas.height);\r\n\t\t\tctx.restore();\r\n\r\n\r\n\t\t\tvar newTime = new Date();\r\n            if(newTime-lastTime>500+(window.innerHeight-767)/2){\r\n\t\t\t\tvar random = Math.random()*100>2?true:false;\r\n\t\t\t\tvar x = getRandom(canvas.width/5 , canvas.width*4/5);\r\n\t\t\t\tvar y = getRandom(50 , 200);\r\n\t\t\t\tif(random){\r\n\t\t\t\t\tvar bigboom = new Boom(getRandom(canvas.width/3,canvas.width*2/3) ,2,\"#FFF\" , {x:x , y:y});\r\n\t\t\t\t\tbigbooms.push(bigboom)\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tvar bigboom = new Boom(getRandom(canvas.width/3,canvas.width*2/3) ,2,\"#FFF\" , {x:canvas.width/2 , y:200} , document.querySelectorAll(\".shape\")[parseInt(getRandom(0, document.querySelectorAll(\".shape\").length))]);\r\n\t\t\t\t\tbigbooms.push(bigboom)\r\n\t\t\t\t}\r\n\t\t\t\tlastTime = newTime;\r\n\t\t\t\tconsole.log(bigbooms)\r\n\t\t\t}\r\n\r\n\t\t\tstars.foreach(function(){\r\n\t\t\t\tthis.paint();\r\n\t\t\t})\r\n\r\n\t\t\tdrawMoon();\r\n\r\n\t\t\tbigbooms.foreach(function(index){\r\n\t\t\t\tvar that = this;\r\n\t\t\t\tif(!this.dead){\r\n\t\t\t\t\tthis._move();\r\n\t\t\t\t\tthis._drawLight();\r\n\t\t\t\t}\r\n\t\t\t\telse{\r\n\t\t\t\t\tthis.booms.foreach(function(index){\r\n\t\t\t\t\t\tif(!this.dead) {\r\n\t\t\t\t\t\t\tthis.moveTo(index);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse if(index === that.booms.length-1){\r\n\t\t\t\t\t\t\tbigbooms[bigbooms.indexOf(that)] = null;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\traf(animate);\r\n\t\t}\r\n\r\n\t\tfunction drawMoon(){\r\n\t\t\tvar moon = document.getElementById(\"moon\");\r\n\t\t\tvar centerX = canvas.width-200 , centerY = 100 , width = 80;\r\n\t\t\tif(moon.complete){\r\n\t\t\t\tctx.drawImage(moon , centerX , centerY , width , width )\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tmoon.onload = function(){\r\n\t\t\t\t\tctx.drawImage(moon ,centerX , centerY , width , width)\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tvar index = 0;\r\n\t\t\tfor(var i=0;i<10;i++){\r\n\t\t\t\tctx.save();\r\n\t\t\t\tctx.beginPath();\r\n\t\t\t\tctx.arc(centerX+width/2 , centerY+width/2 , width/2+index , 0 , 2*Math.PI);\r\n\t\t\t\tctx.fillStyle=\"rgba(240,219,120,0.005)\";\r\n\t\t\t\tindex+=2;\r\n\t\t\t\tctx.fill();\r\n\t\t\t\tctx.restore();\r\n\t\t\t}\r\n\t\t\t\r\n\t\t}\r\n\r\n\t\tArray.prototype.foreach = function(callback){\r\n\t\t\tfor(var i=0;i<this.length;i++){\r\n\t\t\t\tif(this[i]!==null) callback.apply(this[i] , [i])\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tvar raf = window.requestAnimationFrame || window.webkitRequestAnimationFrame || window.mozRequestAnimationFrame || window.oRequestAnimationFrame || window.msRequestAnimationFrame || function (callback) { window.setTimeout(callback, 1000 / 60); };\r\n \t\t\r\n\t\tcanvas.onclick = function(){\r\n\t\t\tvar x = event.clientX;\r\n\t\t\tvar y = event.clientY;\r\n\t\t\tvar bigboom = new Boom(getRandom(canvas.width/3,canvas.width*2/3) ,2,\"#FFF\" , {x:x , y:y});\r\n\t\t\tbigbooms.push(bigboom)\r\n\t\t}\r\n\r\n\t\t// canvas.addEventLisener(\"touchstart\" , function(event){\r\n\t\t// \tvar touch = event.targetTouches[0];\r\n\t\t// \tvar x = event.pageX;\r\n\t\t// \tvar y = event.pageY;\r\n\t\t// \tvar bigboom = new Boom(getRandom(canvas.width/3,canvas.width*2/3) ,2,\"#FFF\" , {x:x , y:y});\r\n\t\t// \tbigbooms.push(bigboom)\r\n\t\t// })\r\n\r\n\t\tvar Boom = function(x,r,c,boomArea,shape){\r\n\t\t\tthis.booms = [];\r\n\t\t\tthis.x = x;\r\n\t\t\tthis.y = (canvas.height+r);\r\n\t\t\tthis.r = r;\r\n\t\t\tthis.c = c;\r\n\t\t\tthis.shape = shape || false;\r\n\t\t\tthis.boomArea = boomArea;\r\n\t\t\tthis.theta = 0;\r\n\t\t\tthis.dead = false;\r\n\t\t\tthis.ba = parseInt(getRandom(80 , 200));\r\n\t\t}\r\n\t\tBoom.prototype = {\r\n\t\t\t_paint:function(){\r\n\t\t\t\tctx.save();\r\n\t\t\t\tctx.beginPath();\r\n\t\t\t\tctx.arc(this.x,this.y,this.r,0,2*Math.PI);\r\n\t\t\t\tctx.fillStyle = this.c;\r\n\t\t\t\tctx.fill();\r\n\t\t\t\tctx.restore();\r\n\t\t\t},\r\n\t\t\t_move:function(){\r\n\t\t\t\tvar dx = this.boomArea.x - this.x , dy = this.boomArea.y - this.y;\r\n\t\t\t\tthis.x = this.x+dx*0.01;\r\n\t\t\t\tthis.y = this.y+dy*0.01;\r\n\r\n\t\t\t\tif(Math.abs(dx)<=this.ba && Math.abs(dy)<=this.ba){\r\n\t\t\t\t\tif(this.shape){\r\n\t\t\t\t\t\tthis._shapBoom();\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse this._boom();\r\n\t\t\t\t\tthis.dead = true;\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tthis._paint();\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t_drawLight:function(){\r\n\t\t\t\tctx.save();\r\n\t\t\t\tctx.fillStyle = \"rgba(255,228,150,0.3)\";\r\n\t\t\t\tctx.beginPath();\r\n\t\t\t\tctx.arc(this.x , this.y , this.r+3*Math.random()+1 , 0 , 2*Math.PI);\r\n\t\t\t\tctx.fill();\r\n\t\t\t\tctx.restore();\r\n\t\t\t},\r\n\t\t\t_boom:function(){\r\n\t\t\t\tvar fragNum = getRandom(30 , 200);\r\n\t\t\t\tvar style = getRandom(0,10)>=5? 1 : 2;\r\n\t\t\t\tvar color;\r\n\t\t\t\tif(style===1){\r\n\t\t\t\t\tcolor = {\r\n\t\t\t\t\t\ta:parseInt(getRandom(128,255)),\r\n\t\t\t\t\t\tb:parseInt(getRandom(128,255)),\r\n\t\t\t\t\t\tc:parseInt(getRandom(128,255))\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar fanwei = parseInt(getRandom(300, 400));\r\n\t\t\t\tfor(var i=0;i<fragNum;i++){\r\n\t\t\t\t\tif(style===2){\r\n\t\t\t\t\t\tcolor = {\r\n\t\t\t\t\t\t\ta:parseInt(getRandom(128,255)),\r\n\t\t\t\t\t\t\tb:parseInt(getRandom(128,255)),\r\n\t\t\t\t\t\t\tc:parseInt(getRandom(128,255))\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tvar a = getRandom(-Math.PI, Math.PI);\r\n\t\t\t\t\tvar x = getRandom(0, fanwei) * Math.cos(a) + this.x;\r\n\t\t\t\t\tvar y = getRandom(0, fanwei) * Math.sin(a) + this.y; \r\n\t\t\t\t\tvar radius = getRandom(0 , 2)\r\n\t\t\t\t\tvar frag = new Frag(this.x , this.y , radius , color , x , y );\r\n\t\t\t\t\tthis.booms.push(frag);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t_shapBoom:function(){\r\n\t\t\t\tvar that = this;\r\n\t\t\t\tputValue(ocas , octx , this.shape , 5, function(dots){\r\n\t\t\t\t\tvar dx = canvas.width/2-that.x;\r\n\t\t\t\t\tvar dy = canvas.height/2-that.y;\r\n\t\t\t\t\tfor(var i=0;i<dots.length;i++){\r\n\t\t\t\t\t\tcolor = {a:dots[i].a,b:dots[i].b,c:dots[i].c}\r\n\t\t\t\t\t\tvar x = dots[i].x;\r\n\t\t\t\t\t\tvar y = dots[i].y;\r\n\t\t\t\t\t\tvar radius = 1;\r\n\t\t\t\t\t\tvar frag = new Frag(that.x , that.y , radius , color , x-dx , y-dy);\r\n\t\t\t\t\t\tthat.booms.push(frag);\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfunction putValue(canvas , context , ele , dr , callback){\r\n\t\t\tcontext.clearRect(0,0,canvas.width,canvas.height);\r\n\t\t\tvar img = new Image();\r\n\t\t\tif(ele.innerHTML.indexOf(\"img\")>=0){\r\n\t\t\t\timg.src = ele.getElementsByTagName(\"img\")[0].src;\r\n\t\t\t\timgload(img , function(){\r\n\t\t\t\t\tcontext.drawImage(img , canvas.width/2 - img.width/2 , canvas.height/2 - img.width/2);\r\n\t\t\t\t\tdots = getimgData(canvas , context , dr);\r\n\t\t\t\t\tcallback(dots);\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tvar text = ele.innerHTML;\r\n\t\t\t\tcontext.save();\r\n\t\t\t\tvar fontSize =200;\r\n\t\t\t\tcontext.font = fontSize+\"px ËÎÌå bold\";\r\n\t\t\t\tcontext.textAlign = \"center\";\r\n\t\t\t\tcontext.textBaseline = \"middle\";\r\n\t\t\t\tcontext.fillStyle = \"rgba(\"+parseInt(getRandom(128,255))+\",\"+parseInt(getRandom(128,255))+\",\"+parseInt(getRandom(128,255))+\" , 1)\";\r\n\t\t\t\tcontext.fillText(text , canvas.width/2 , canvas.height/2);\r\n\t\t\t\tcontext.restore();\r\n\t\t\t\tdots = getimgData(canvas , context , dr);\r\n\t\t\t\tcallback(dots);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfunction imgload(img , callback){\r\n\t\t\tif(img.complete){\r\n\t\t\t\tcallback.call(img);\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\timg.onload = function(){\r\n\t\t\t\t\tcallback.call(this);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfunction getimgData(canvas , context , dr){\r\n\t\t\tvar imgData = context.getImageData(0,0,canvas.width , canvas.height);\r\n\t\t\tcontext.clearRect(0,0,canvas.width , canvas.height);\r\n\t\t\tvar dots = [];\r\n\t\t\tfor(var x=0;x<imgData.width;x+=dr){\r\n\t\t\t\tfor(var y=0;y<imgData.height;y+=dr){\r\n\t\t\t\t\tvar i = (y*imgData.width + x)*4;\r\n\t\t\t\t\tif(imgData.data[i+3] > 128){\r\n\t\t\t\t\t\tvar dot = {x:x , y:y , a:imgData.data[i] , b:imgData.data[i+1] , c:imgData.data[i+2]};\r\n\t\t\t\t\t\tdots.push(dot);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn dots;\r\n\t\t}\r\n\r\n\t\tfunction getRandom(a , b){\r\n\t\t\treturn Math.random()*(b-a)+a;\r\n\t\t}\r\n\r\n\r\n\t\tvar maxRadius = 1 , stars=[];\r\n\t\tfunction drawBg(){\r\n\t\t\tfor(var i=0;i<100;i++){\r\n\t\t\t\tvar r = Math.random()*maxRadius;\r\n\t\t\t\tvar x = Math.random()*canvas.width;\r\n\t\t\t\tvar y = Math.random()*2*canvas.height - canvas.height;\r\n\t\t\t\tvar star = new Star(x , y , r);\r\n\t\t\t\tstars.push(star);\r\n\t\t\t\tstar.paint()\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tvar Star = function(x,y,r){\r\n\t\t\tthis.x = x;this.y=y;this.r=r;\r\n\t\t}\r\n\t\tStar.prototype = {\r\n\t\t\tpaint:function(){\r\n\t\t\t\tctx.save();\r\n\t\t\t\tctx.beginPath();\r\n\t\t\t\tctx.arc(this.x , this.y , this.r , 0 , 2*Math.PI);\r\n\t\t\t\tctx.fillStyle = \"rgba(255,255,255,\"+this.r+\")\";\r\n\t\t\t\tctx.fill();\r\n\t\t\t\tctx.restore();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tvar focallength = 250;\r\n\t\tvar Frag = function(centerX , centerY , radius , color ,tx , ty){\r\n\t\t\tthis.tx = tx;\r\n\t\t\tthis.ty = ty;\r\n\t\t\tthis.x = centerX;\r\n\t\t\tthis.y = centerY;\r\n\t\t\tthis.dead = false;\r\n\t\t\tthis.centerX = centerX;\r\n\t\t\tthis.centerY = centerY;\r\n\t\t\tthis.radius = radius;\r\n\t\t\tthis.color = color;\r\n\t\t}\r\n\r\n\t\tFrag.prototype = {\r\n\t\t\tpaint:function(){\r\n\t\t\t\tctx.save();\r\n\t\t\t\tctx.beginPath();\r\n\t\t\t\tctx.arc(this.x , this.y , this.radius , 0 , 2*Math.PI);\r\n\t\t\t\tctx.fillStyle = \"rgba(\"+this.color.a+\",\"+this.color.b+\",\"+this.color.c+\",1)\";\r\n\t\t\t\tctx.fill()\r\n\t\t\t\tctx.restore();\r\n\t\t\t},\r\n\t\t\tmoveTo:function(index){\r\n\t\t\t\tthis.ty = this.ty+0.3;\r\n\t\t\t\tvar dx = this.tx - this.x , dy = this.ty - this.y;\r\n\t\t\t\tthis.x = Math.abs(dx)<0.1 ? this.tx : (this.x+dx*0.1);\r\n\t\t\t\tthis.y = Math.abs(dy)<0.1 ? this.ty : (this.y+dy*0.1);\r\n\t\t\t\tif(dx===0 && Math.abs(dy)<=80){\r\n\t\t\t\t\tthis.dead = true;\r\n\t\t\t\t}\r\n\t\t\t\tthis.paint();\r\n\t\t\t}\r\n\t\t}\r\n\t</script>\r\n<div style=\"text-align:center;margin:50px 0; font:normal 14px/24px 'MicroSoft YaHei';\">\r\n<p>ÊÊÓÃä¯ÀÀÆ÷£º360¡¢FireFox¡¢Chrome¡¢Safari¡¢Opera¡¢°ÁÓÎ¡¢ËÑ¹·¡¢ÊÀ½çÖ®´°. ²»Ö§³ÖIE8¼°ÒÔÏÂä¯ÀÀÆ÷¡£</p>\r\n<p>À´Ô´£º<a href=\"http://sc.chinaz.com/\" target=\"_blank\">Õ¾³¤ËØ²Ä</a></p>\r\n</div>\r\n</body>\r\n</html>","google":"","note":"Don't delete this file! It's used internally to help with page regeneration."}